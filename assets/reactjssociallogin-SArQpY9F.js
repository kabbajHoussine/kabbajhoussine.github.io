import{r as o,R as M}from"./react-Drobi48b.js";function D(){return(D=Object.assign||function(e){for(var p=1;p<arguments.length;p++){var d=arguments[p];for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(e[v]=d[v])}return e}).apply(this,arguments)}function ce(e,p){(p==null||p>e.length)&&(p=e.length);for(var d=0,v=new Array(p);d<p;d++)v[d]=e[d];return v}var re=window;o.memo(function(e){var p=e.state,d=p===void 0?"":p,v=e.client_id,P=e.className,w=e.redirect_uri,S=e.scope,_=S===void 0?"profile":S,N=e.isOnlyGetToken,g=N!==void 0&&N,L=e.scope_data,R=L===void 0?{profile:{essential:!0}}:L,j=e.response_type,I=j===void 0?"token":j,b=e.children,c=e.onReject,l=e.onResolve,a=e.onLoginStart,u=o.useRef(null),f=o.useState(!1),T=f[0],y=f[1];o.useEffect(function(){!T&&r()},[T]),o.useEffect(function(){return function(){u.current&&u.current.remove()}},[]);var k=o.useCallback(function(){return!!document.getElementById("amazon-login")},[]),s=o.useCallback(function(m,C,H,F,E){C===void 0&&(C="script");var z=m.createElement(C);z.id=H,z.src=F,z.async=!0,z.defer=!0;var O=document.getElementsByTagName("script")[0];u.current=z,O&&O.parentNode&&O.parentNode.insertBefore(z,O),z.onload=E},[]),i=o.useCallback(function(m){try{return fetch("https://api.amazon.com/user/profile",{headers:{Authorization:"Bearer "+m.access_token}}).then(function(C){return C.json()}).then(function(C){l({provider:"amazon",data:D({},C,m)})}).catch(function(C){c(C)}).finally(function(){}),Promise.resolve()}catch(C){return Promise.reject(C)}},[c,l]),n=o.useCallback(function(m){g?l({provider:"amazon",data:D({},m)}):i(m)},[i,l,g]),t=o.useCallback(function(m){c(m)},[c]),r=o.useCallback(function(){k()?y(!0):s(document,"script","amazon-login","https://assets.loginwithamazon.com/sdk/na/login1.js",function(){re.amazon.Login.setClientId(v),y(!0)})},[k,v,s]),h=o.useCallback(function(){T&&(re.amazon?(a&&a(),re.amazon.Login.authorize({scope:_,scope_data:R,response_type:I,redirect_uri:w,state:d},function(m){m.error?t(m.error):n(m)})):(r(),c("Google SDK isn't loaded!")))},[r,_,d,c,R,T,t,a,w,I,n]);return M.createElement("div",{className:P,onClick:h},b)});var ie=window;o.memo(function(e){var p=e.appId,d=e.scope,v=d===void 0?"email,public_profile":d,P=e.state,w=P===void 0||P,S=e.xfbml,_=S===void 0||S,N=e.cookie,g=N===void 0||N,L=e.version,R=L===void 0?"v2.7":L,j=e.language,I=j===void 0?"en_EN":j,b=e.auth_type,c=b===void 0?"":b,l=e.className,a=e.onLoginStart,u=e.onReject,f=e.onResolve,T=e.redirect_uri,y=e.fieldsProfile,k=y===void 0?"id,first_name,last_name,middle_name,name,name_format,picture,short_name,email,gender":y,s=e.response_type,i=s===void 0?"code":s,n=e.return_scopes,t=n===void 0||n,r=e.isOnlyGetToken,h=r!==void 0&&r,m=e.children,C=o.useRef(null),H=o.useState(!1),F=H[0],E=H[1],z=o.useState(!1),O=z[0],x=z[1];o.useEffect(function(){!F&&X()},[F]),o.useEffect(function(){return function(){C.current&&C.current.remove()}},[]);var B=o.useCallback(function(A,K){var $=A.createElement("script");$.id="facebook-jssdk",$.src="https://connect.facebook.net/en_EN/sdk.js";var G=A.getElementsByTagName("script")[0];G&&G.parentNode&&G.parentNode.insertBefore($,G),K()},[]),V=o.useCallback(function(){return!!document.getElementById("facebook-jssdk")},[]),q=o.useCallback(function(A,K){var $=window;$.fbAsyncInit=function(){$.FB&&$.FB.init(D({},A)),E(!0);var G=K.getElementById("fb-root");G||((G=K.createElement("div")).id="fb-root",K.body.appendChild(G)),C.current=G}},[]),Z=o.useCallback(function(A){ie.FB.api("/me",{locale:I,fields:k},function(K){f({provider:"facebook",data:D({},A,K)})})},[k,I,f]),ee=o.useCallback(function(A){console.log("ðŸš€ ~ file: index.tsx:127 ~ response:",A),A.authResponse?h?f({provider:"facebook",data:D({},A.authResponse)}):Z(A.authResponse):u(A),x(!1)},[Z,h,u,f]),X=o.useCallback(function(){V()?E(!0):B(document,function(){q({appId:p,xfbml:_,version:R,state:w,cookie:g,redirect_uri:T,response_type:i},document)})},[w,p,_,g,R,q,T,i,B,V]),Y=o.useCallback(function(){F&&!O&&(ie.FB?(x(!0),a&&a(),ie.FB.login(ee,{scope:v,return_scopes:t,auth_type:c})):(X(),u("Fb isn't loaded!"),x(!1)))},[X,v,u,c,F,a,O,t,ee]);return M.createElement("div",{className:l,onClick:Y},m)});var J="875c0462-6309-4ddf-9889-5227b1acc82c",te=window,le=o.memo(function(e){var p=e.client_id,d=e.scope,v=d===void 0?"https://www.googleapis.com/auth/userinfo.profile":d,P=e.prompt,w=P===void 0?"select_account":P,S=e.typeResponse,_=S===void 0?"accessToken":S,N=e.ux_mode,g=e.className,L=g===void 0?"":g,R=e.login_hint,j=R===void 0?"":R,I=e.access_type,b=I===void 0?"online":I,c=e.onLoginStart,l=e.onReject,a=e.onResolve,u=e.redirect_uri,f=u===void 0?"/":u,T=e.auto_select,y=T!==void 0&&T,k=e.isOnlyGetToken,s=k!==void 0&&k,i=e.cookie_policy,n=i===void 0?"single_host_origin":i,t=e.hosted_domain,r=t===void 0?"":t,h=e.discoveryDocs,m=h===void 0?"":h,C=e.children,H=e.fetch_basic_profile,F=H===void 0||H,E=o.useRef(null),z=o.useState(!1),O=z[0],x=z[1],B=o.useState(null),V=B[0],q=B[1];o.useEffect(function(){!O&&K()},[O]),o.useEffect(function(){return function(){E.current&&E.current.remove()}},[]);var Z=o.useCallback(function(){return!!document.getElementById("google-login")},[]),ee=o.useCallback(function(G,Q,U,oe,se){Q===void 0&&(Q="script");var W=G.createElement(Q);W.id=U,W.src=oe,W.async=!0,W.defer=!0;var ne=document.getElementsByTagName("script")[0];E.current=W,ne&&ne.parentNode&&ne.parentNode.insertBefore(W,ne),W.onload=se},[]),X=o.useCallback(function(G){if(_==="accessToken"){var Q=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J,Authorization:"Bearer "+G.access_token});fetch("https://cors.bridged.cc/https://www.googleapis.com/oauth2/v3/userinfo?alt=json",{method:"GET",headers:Q}).then(function(U){return U.json()}).then(function(U){var oe=D({},G,U);a({provider:"google",data:oe})}).catch(function(U){l(U)})}else fetch("https://www.googleapis.com/oauth2/v3/tokeninfo?id_token="+G.credential,{method:"GET"}).then(function(U){return U.json()}).then(function(U){var oe=D({},G,U);a({provider:"google",data:oe})}).catch(function(U){l(U)})},[_,l,a]),Y=o.useCallback(function(G){G&&b==="offline"||s?a({provider:"google",data:G}):X(G)},[b,s,X,a]),A=o.useCallback(function(G){l({provider:"google",data:G})},[l]),K=o.useCallback(function(){Z()?x(!0):ee(document,"script","google-login","https://accounts.google.com/gsi/client",function(){var G={client_id:p,ux_mode:N},Q=null;if(_==="idToken")te.google.accounts.id.initialize(D({},G,{auto_select:y,prompt:"select_account",login_uri:f,callback:Y,native_callback:Y,error_callback:A}));else{var U=D({},G,{scope:v,prompt:w,login_hint:j,access_type:b,hosted_domain:r,redirect_uri:f,cookie_policy:n,discoveryDocs:m,immediate:!0,fetch_basic_profile:F,callback:Y,error_callback:A});Q=b==="offline"?te.google.accounts.oauth2.initCodeClient(U):te.google.accounts.oauth2.initTokenClient(U)}Q&&q(Q),x(!0)})},[v,w,N,p,j,y,b,f,_,m,n,r,Y,A,F,ee,Z]),$=o.useCallback(function(){O&&(te.google?(c&&c(),V?b==="offline"?V.requestCode():V.requestAccessToken():te.google.accounts.id.prompt()):(K(),l("Google SDK isn't loaded!")))},[b,V,O,K,c,l]);return M.createElement("div",{className:L,onClick:$},C)});o.memo(function(e){var p=e.state,d=p===void 0?"":p,v=e.scope,P=v===void 0?"repo,gist":v,w=e.client_id,S=e.client_secret,_=e.className,N=_===void 0?"":_,g=e.redirect_uri,L=e.allow_signup,R=L!==void 0&&L,j=e.isOnlyGetToken,I=j!==void 0&&j,b=e.isOnlyGetCode,c=b!==void 0&&b,l=e.children,a=e.onReject,u=e.onResolve,f=e.onLoginStart;o.useEffect(function(){var n=new URL(window.location.href),t=n.searchParams.get("code"),r=n.searchParams.get("state");r!=null&&r.includes("_github")&&t&&(localStorage.setItem("github",t),window.close())},[]);var T=o.useCallback(function(n){fetch("https://cors.bridged.cc/https://api.github.com//user",{method:"GET",headers:{Authorization:"token "+n.access_token,"x-cors-grida-api-key":J}}).then(function(t){return t.json()}).then(function(t){u({provider:"github",data:D({},t,n)})}).catch(function(t){a(t)})},[a,u]),y=o.useCallback(function(n){if(c)u({provider:"github",data:{code:n}});else{var t={code:n,state:d,redirect_uri:g,client_id:w,client_secret:S},r=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J});fetch("https://cors.bridged.cc/https://github.com/login/oauth/access_token",{method:"POST",headers:r,body:new URLSearchParams(t)}).then(function(h){return h.text()}).then(function(h){for(var m,C={},H=function(E,z){var O;if(typeof Symbol>"u"||E[Symbol.iterator]==null){if(Array.isArray(E)||(O=function(B,V){if(B){if(typeof B=="string")return ce(B,void 0);var q=Object.prototype.toString.call(B).slice(8,-1);return q==="Object"&&B.constructor&&(q=B.constructor.name),q==="Map"||q==="Set"?Array.from(B):q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(q)?ce(B,void 0):void 0}}(E))){O&&(E=O);var x=0;return function(){return x>=E.length?{done:!0}:{done:!1,value:E[x++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(O=E[Symbol.iterator]()).next.bind(O)}(new URLSearchParams(h));!(m=H()).done;){var F=m.value;C[F[0]]=F[1]}C.access_token?I?u({provider:"github",data:C}):T(C):a("no data")}).catch(function(h){a(h)})}},[d,a,T,u,w,g,S,c,I]),k=o.useCallback(function(n){var t=n.type,r=n.code,h=n.provider;try{return Promise.resolve(t==="code"&&h==="github"&&r&&y(r))}catch(m){return Promise.reject(m)}},[y]),s=o.useCallback(function(){window.removeEventListener("storage",s,!1);var n=localStorage.getItem("github");n&&(k({provider:"github",type:"code",code:n}),localStorage.removeItem("github"))},[k]),i=o.useCallback(function(){f&&f(),window.addEventListener("storage",s,!1);var n=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://github.com/login/oauth/authorize?client_id="+w+"&scope="+P+"&state="+d+"_github&redirect_uri="+g+"&allow_signup="+R,"Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+n)},[P,d,w,g,R,f,s]);return M.createElement("div",{className:N,onClick:i},l)});o.memo(function(e){var p=e.state,d=p===void 0?"":p,v=e.client_id,P=e.client_secret,w=e.className,S=e.redirect_uri,_=e.fields,N=_===void 0?"id,username,account_type,media_count":_,g=e.scope,L=g===void 0?"user_profile,user_media":g,R=e.response_type,j=R===void 0?"code":R,I=e.isOnlyGetCode,b=I!==void 0&&I,c=e.isOnlyGetToken,l=c!==void 0&&c,a=e.children,u=e.onReject,f=e.onResolve,T=e.onLoginStart;o.useEffect(function(){var t=new URL(window.location.href),r=t.searchParams.get("code"),h=t.searchParams.get("state");h!=null&&h.includes("_instagram")&&r&&(localStorage.setItem("instagram",r),window.close())},[]);var y=o.useCallback(function(t){fetch("https://cors.bridged.cc/https://graph.instagram.com//me?fields="+N+"&access_token="+t.access_token,{method:"GET",headers:{"x-cors-grida-api-key":J}}).then(function(r){return r.json()}).then(function(r){f({provider:"instagram",data:D({},r,t)})}).catch(function(r){u(r)})},[N,u,f]),k=o.useCallback(function(t){if(b)f({provider:"instagram",data:{code:t}});else{var r={grant_type:"authorization_code",code:t,redirect_uri:S,client_id:v,client_secret:P},h=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J});fetch("https://cors.bridged.cc/https://api.instagram.com/oauth/access_token",{method:"POST",headers:h,body:new URLSearchParams(r)}).then(function(m){return m.json()}).then(function(m){m.access_token?l?f({provider:"instagram",data:m}):y(m):u("no data")}).catch(function(m){u(m)}).finally(function(){})}},[u,f,y,v,S,P,b,l]),s=o.useCallback(function(t){var r=t.type,h=t.code,m=t.provider;try{return Promise.resolve(r==="code"&&m==="instagram"&&h&&k(h))}catch(C){return Promise.reject(C)}},[k]),i=o.useCallback(function(){window.removeEventListener("storage",i,!1);var t=localStorage.getItem("instagram");t&&(s({provider:"instagram",type:"code",code:t}),localStorage.removeItem("instagram"))},[s]),n=o.useCallback(function(){T&&T(),window.addEventListener("storage",i,!1);var t=window.screen.width/2-225,r=window.screen.height/2-365;window.open("https://api.instagram.com/oauth/authorize?response_type="+j+"&client_id="+v+"&scope="+L+"&state="+d+"_instagram&redirect_uri="+S,"Instagram","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+r+", left="+t)},[L,d,v,S,T,j,i]);return M.createElement("div",{className:w,onClick:n},a)});o.memo(function(e){var p=e.tenant,d=p===void 0?"common":p,v=e.state,P=v===void 0?"":v,w=e.client_id,S=e.className,_=e.redirect_uri,N=e.scope,g=N===void 0?"profile openid email":N,L=e.response_type,R=L===void 0?"code":L,j=e.response_mode,I=j===void 0?"query":j,b=e.children,c=e.code_challenge,l=c===void 0?"19cfc47c216dacba8ca23eeee817603e2ba34fe0976378662ba31688ed302fa9":c,a=e.code_challenge_method,u=a===void 0?"plain":a,f=e.prompt,T=f===void 0?"select_account":f,y=e.isOnlyGetCode,k=y!==void 0&&y,s=e.isOnlyGetToken,i=s!==void 0&&s,n=e.onLoginStart,t=e.onReject,r=e.onResolve;o.useEffect(function(){var E=new URL(window.location.href),z=E.searchParams.get("code"),O=E.searchParams.get("state");O!=null&&O.includes("_microsoft")&&z&&(localStorage.setItem("microsoft",z),window.close())},[]);var h=o.useCallback(function(E){fetch("https://graph.microsoft.com/v1.0/me",{method:"GET",headers:{Authorization:"Bearer "+E.access_token}}).then(function(z){return z.json()}).then(function(z){r({provider:"microsoft",data:D({},z,E)})}).catch(function(z){t(z)})},[t,r]),m=o.useCallback(function(E){if(k)r({provider:"microsoft",data:{code:E}});else{var z={code:E,scope:g,client_id:w,redirect_uri:_,code_verifier:l,grant_type:"authorization_code"},O=new Headers({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"});fetch("https://login.microsoftonline.com/"+d+"/oauth2/v2.0/token",{method:"POST",headers:O,body:new URLSearchParams(z)}).then(function(x){return x.json()}).then(function(x){x.access_token?i?r({provider:"microsoft",data:x}):h(x):t("no data")}).catch(function(x){t(x)})}},[g,d,t,h,w,r,_,l,k,i]),C=o.useCallback(function(E){var z=E.type,O=E.code,x=E.provider;try{return Promise.resolve(z==="code"&&x==="microsoft"&&O&&m(O))}catch(B){return Promise.reject(B)}},[m]),H=o.useCallback(function(){window.removeEventListener("storage",H,!1);var E=localStorage.getItem("microsoft");E&&(C({provider:"microsoft",type:"code",code:E}),localStorage.removeItem("microsoft"))},[C]),F=o.useCallback(function(){n&&n(),window.addEventListener("storage",H,!1);var E=window.screen.width/2-225,z=window.screen.height/2-365;window.open("https://login.microsoftonline.com/"+d+"/oauth2/v2.0/authorize?client_id="+w+`
        &response_type=`+R+`
        &redirect_uri=`+_+`
        &response_mode=`+I+`
        &scope=`+g+`
        &state=`+P+`_microsoft
        &prompt=`+T+`
        &code_challenge=`+l+`
        &code_challenge_method=`+u,"Microsoft","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+z+", left="+E)},[g,P,T,d,w,n,_,I,R,l,H,u]);return M.createElement("div",{className:S,onClick:F},b)});o.memo(function(e){var p=e.state,d=p===void 0?"":p,v=e.scope,P=v===void 0?"r_liteprofile":v,w=e.client_id,S=e.client_secret,_=e.className,N=_===void 0?"":_,g=e.redirect_uri,L=e.response_type,R=L===void 0?"code":L,j=e.isOnlyGetCode,I=j!==void 0&&j,b=e.isOnlyGetToken,c=b!==void 0&&b,l=e.children,a=e.onLoginStart,u=e.onReject,f=e.onResolve;o.useEffect(function(){var n=new URL(window.location.href),t=n.searchParams.get("code"),r=n.searchParams.get("state");r!=null&&r.includes("_linkedin")&&t&&(localStorage.setItem("linkedin",t),window.close())},[]);var T=o.useCallback(function(n){fetch("https://api.allorigins.win/get?url="+encodeURIComponent("https://api.linkedin.com/v2/me?oauth2_access_token="+n.access_token+"&projection=(id,profilePicture(displayImage~digitalmediaAsset:playableStreams),localizedLastName, firstName,lastName,localizedFirstName)"),{method:"GET"}).then(function(t){return t.json()}).then(function(t){var r=D({},n);if(t.contents){var h=JSON.parse(t.contents);typeof n=="object"&&Object.entries(h).map(function(m){r[m[0]]=m[1]})}f({provider:"linkedin",data:r})}).catch(function(t){u(t)})},[u,f]),y=o.useCallback(function(n){if(I)f({provider:"linkedin",data:{code:n}});else{var t={code:n,grant_type:"authorization_code",redirect_uri:g,client_id:w,client_secret:S},r=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J});fetch("https://cors.bridged.cc/https://www.linkedin.com/oauth/v2/accessToken",{method:"POST",headers:r,body:new URLSearchParams(t)}).then(function(h){return h.json()}).then(function(h){c?f({provider:"linkedin",data:h}):T(h)}).catch(function(h){u(h)})}},[u,f,w,T,g,S,I,c]),k=o.useCallback(function(n){var t=n.type,r=n.code,h=n.provider;try{return Promise.resolve(t==="code"&&h==="linkedin"&&r&&y(r))}catch(m){return Promise.reject(m)}},[y]),s=o.useCallback(function(){window.removeEventListener("storage",s,!1);var n=localStorage.getItem("linkedin");n&&(k({provider:"linkedin",type:"code",code:n}),localStorage.removeItem("linkedin"))},[k]),i=o.useCallback(function(){a&&a(),window.addEventListener("storage",s,!1);var n=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://www.linkedin.com/oauth/v2/authorization?response_type="+R+"&client_id="+w+"&scope="+P+"&state="+d+"_linkedin&redirect_uri="+g,"Linkedin","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+n)},[a,s,R,w,P,d,g]);return M.createElement("div",{className:N,onClick:i},l)});o.memo(function(e){var p=e.state,d=p===void 0?"":p,v=e.scope,P=v===void 0?"boards:read,pins:read,user_accounts:read":v,w=e.client_id,S=e.client_secret,_=e.className,N=_===void 0?"":_,g=e.redirect_uri,L=e.isOnlyGetCode,R=L!==void 0&&L,j=e.isOnlyGetToken,I=j!==void 0&&j,b=e.children,c=e.onLoginStart,l=e.onReject,a=e.onResolve;o.useEffect(function(){var s=new URL(window.location.href),i=s.searchParams.get("code"),n=s.searchParams.get("state");n!=null&&n.includes("_pinterest")&&i&&(localStorage.setItem("pinterest",i),window.close())},[]);var u=o.useCallback(function(s){fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/user_account",{method:"GET",headers:{Authorization:"Bearer "+s.access_token,"x-cors-grida-api-key":J}}).then(function(i){return i.json()}).then(function(i){a({provider:"pinterest",data:D({},s,i)})}).catch(function(i){return l(i)})},[l,a]),f=o.useCallback(function(s){try{var i=function(){if(!R){var n={code:s,redirect_uri:g,grant_type:"authorization_code"},t=[];for(var r in n){var h=encodeURIComponent(r),m=encodeURIComponent(n[r]);t.push(h+"="+m)}return t=t.join("&"),Promise.resolve(fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/oauth/token",{method:"POST",headers:{Authorization:"Basic "+btoa(w+":"+S),"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J},body:t}).then(function(C){return C.json()}).catch(function(C){return l(C)})).then(function(C){C.access_token&&(I?a({provider:"pinterest",data:C}):u(C))})}a({provider:"pinterest",data:{code:s}})}();return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(n){return Promise.reject(n)}},[l,w,u,a,g,S,R,I]),T=o.useCallback(function(s){var i=s.type,n=s.code,t=s.provider;try{return Promise.resolve(i==="code"&&t==="pinterest"&&n&&f(n))}catch(r){return Promise.reject(r)}},[f]),y=o.useCallback(function(){window.removeEventListener("storage",y,!1);var s=localStorage.getItem("pinterest");s&&(T({provider:"pinterest",type:"code",code:s}),localStorage.removeItem("pinterest"))},[T]),k=o.useCallback(function(){c&&c(),window.addEventListener("storage",y,!1);var s=window.screen.width/2-225,i=window.screen.height/2-365;window.open("https://www.pinterest.com/oauth/?client_id="+w+"&scope="+P+"&state="+d+"_pinterest&redirect_uri="+g+"&response_type=code","Pinterest","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+i+", left="+s)},[P,d,w,g,c,y]);return M.createElement("div",{className:N,onClick:k},b)});o.memo(function(e){var p=e.client_id,d=e.className,v=d===void 0?"":d,P=e.redirect_uri,w=e.children,S=e.fields,_=S===void 0?"created_at,description,entities,id,location,name,pinned_tweet_id,profile_image_url,protected,public_metrics,url,username,verified,withheld":S,N=e.state,g=N===void 0?"state":N,L=e.scope,R=L===void 0?"users.read%20tweet.read":L,j=e.isOnlyGetCode,I=j!==void 0&&j,b=e.isOnlyGetToken,c=b!==void 0&&b,l=e.onLoginStart,a=e.onReject,u=e.onResolve;o.useEffect(function(){var i=new URL(window.location.href),n=i.searchParams.get("code");i.searchParams.get("state")&&n&&(localStorage.setItem("twitter",""+n),window.close())},[]);var f=o.useCallback(function(i){fetch("https://cors.bridged.cc/https://api.twitter.com/2/users/me?user.fields="+_,{method:"GET",headers:{Authorization:"Bearer "+i.access_token,"x-cors-grida-api-key":J}}).then(function(n){return n.json()}).then(function(n){u({provider:"twitter",data:D({},i,n.data)})}).catch(function(n){return a(n)})},[_,a,u]),T=o.useCallback(function(i){try{var n=function(){if(!I){var t=new URLSearchParams({code:i,redirect_uri:P,client_id:p,grant_type:"authorization_code",code_verifier:"challenge"});return Promise.resolve(fetch("https://cors.bridged.cc/https://api.twitter.com/2/oauth2/token",{method:"POST",body:t,headers:{"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J}}).then(function(r){return r.json()}).catch(function(r){return a(r)})).then(function(r){r.access_token&&(c?u({provider:"twitter",data:r}):f(r))})}u({provider:"twitter",data:{code:i}})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(t){return Promise.reject(t)}},[a,f,u,p,P,I,c]),y=o.useCallback(function(i){var n=i.type,t=i.code,r=i.provider;try{return Promise.resolve(n==="code"&&r==="twitter"&&t&&T(t))}catch(h){return Promise.reject(h)}},[T]),k=o.useCallback(function(){window.removeEventListener("storage",k,!1);var i=localStorage.getItem("twitter");i&&(y({provider:"twitter",type:"code",code:i}),localStorage.removeItem("twitter"))},[y]),s=o.useCallback(function(){try{l&&l(),window.addEventListener("storage",k,!1);var i=window.screen.width/2-225,n=window.screen.height/2-365;return window.open("https://twitter.com/i/oauth2/authorize?response_type=code&client_id="+p+"&redirect_uri="+P+"&scope="+R+"&state="+g+"&code_challenge=challenge&code_challenge_method=plain","twitter","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+n+", left="+i),Promise.resolve()}catch(t){return Promise.reject(t)}},[R,g,p,l,P,k]);return M.createElement("div",{className:v,onClick:s},w)});typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var ae=window;o.memo(function(e){var p=e.client_id,d=e.scope,v=d===void 0?"name email":d,P=e.className,w=P===void 0?"":P,S=e.onLoginStart,_=e.onReject,N=e.onResolve,g=e.redirect_uri,L=g===void 0?"/":g,R=e.children,j=o.useRef(null),I=o.useState(!1),b=I[0],c=I[1];o.useEffect(function(){!b&&f()},[b]),o.useEffect(function(){return function(){j.current&&j.current.remove()}},[]);var l=o.useCallback(function(){return!!document.getElementById("apple-login")},[]),a=o.useCallback(function(y,k,s,i,n){k===void 0&&(k="script");var t=y.createElement(k);t.id=s,t.src=i,t.async=!0,t.defer=!0;var r=document.getElementsByTagName("script")[0];j.current=t,r&&r.parentNode&&r.parentNode.insertBefore(t,r),t.onload=n},[]),u=o.useCallback(function(y){N({provider:"apple",data:y})},[N]),f=o.useCallback(function(){l()?c(!0):a(document,"script","apple-login","https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",function(){ae.AppleID.auth.init({clientId:p,scope:v,redirectURI:L,state:"origin:web",usePopup:!0}),c(!0)})},[v,p,L,a,l]),T=o.useCallback(function(){try{if(!b)return Promise.resolve();var y=function(){if(ae.AppleID){S&&S();var k=function(s,i){try{var n=Promise.resolve(ae.AppleID.auth.signIn()).then(function(t){u(t)})}catch(t){return i(t)}return n&&n.then?n.then(void 0,i):n}(0,function(s){_({err:s})});if(k&&k.then)return k.then(function(){})}else f(),_("Apple SDK isn't loaded!")}();return Promise.resolve(y&&y.then?y.then(function(){}):void 0)}catch(k){return Promise.reject(k)}},[u,b,f,S,_]);return M.createElement("div",{className:w,onClick:T},R)});o.memo(function(e){var p=e.state,d=p===void 0?"":p,v=e.scope,P=v===void 0?"user.info.basic":v,w=e.client_key,S=e.className,_=S===void 0?"":S,N=e.redirect_uri,g=e.children,L=e.onResolve,R=e.onLoginStart;o.useEffect(function(){var c=new URL(window.location.href),l=c.searchParams.get("code"),a=c.searchParams.get("state");a!=null&&a.includes("_tiktok")&&l&&(localStorage.setItem("tiktok",l),window.close())},[]);var j=o.useCallback(function(c){var l=c.type,a=c.code,u=c.provider;try{return Promise.resolve(l==="code"&&u==="tiktok"&&a&&L({provider:"tiktok",data:{code:a}}))}catch(f){return Promise.reject(f)}},[L]),I=o.useCallback(function(){window.removeEventListener("storage",I,!1);var c=localStorage.getItem("tiktok");c&&(j({provider:"tiktok",type:"code",code:c}),localStorage.removeItem("instagram"))},[j]),b=o.useCallback(function(){R&&R(),window.addEventListener("storage",I,!1);var c=window.screen.width/2-225,l=window.screen.height/2-365;window.open("https://www.tiktok.com/auth/authorize?client_key="+w+"&scope="+P+"&state="+d+"_tiktok&redirect_uri="+N+"&response_type=code","Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+l+", left="+c)},[P,d,w,N,R,I]);return M.createElement("div",{className:_,onClick:b},g)});export{le as m};
